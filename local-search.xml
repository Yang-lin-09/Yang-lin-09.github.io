<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Python metadata incorrect</title>
    <link href="/2021/12/29/Python-metadata-incorrect/"/>
    <url>/2021/12/29/Python-metadata-incorrect/</url>
    
    <content type="html"><![CDATA[<h3 id="PIP-can’t-install-anything-metadata-incorrect"><a href="#PIP-can’t-install-anything-metadata-incorrect" class="headerlink" title="PIP can’t install anything, metadata incorrect"></a>PIP can’t install anything, metadata incorrect</h3><p>如果你使用python安装软件出现以下问题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># This continues until it reaches the oldest version possible</span><br><br>Defaulting to user installation because normal site-packages is not writeable<br>Requirement already satisfied: pip <span class="hljs-keyword">in</span> /usr/lib/python3.9/site-packages (20.3.4)<br>Collecting pip<br>  Using cached pip-21.2.4-py3-none-any.whl (1.6 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/ca/31/b88ef447d595963c01060998cb329251648acf4a067721b0452c45527eb8/pip-21.2.4-py3-none-any.whl<span class="hljs-comment">#sha256=fa9ebb85d3fd607617c0c44aca302b1b45d87f9c2a1649b46c26167ca4296323 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/ca/31/b88ef447d595963c01060998cb329251648acf4a067721b0452c45527eb8/pip-21.2.4-py3-none-any.whl#sha256=fa9ebb85d3fd607617c0c44aca302b1b45d87f9c2a1649b46c26167ca4296323 has different version in metadata: &#x27;21.2.4&#x27;</span><br>  Using cached pip-21.2.4.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/52/e1/06c018197d8151383f66ebf6979d951995cf495629fc54149491f5d157d0/pip-21.2.4.tar.gz<span class="hljs-comment">#sha256=0eb8a1516c3d138ae8689c0c1a60fde7143310832f9dc77e11d8a4bc62de193b (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/52/e1/06c018197d8151383f66ebf6979d951995cf495629fc54149491f5d157d0/pip-21.2.4.tar.gz#sha256=0eb8a1516c3d138ae8689c0c1a60fde7143310832f9dc77e11d8a4bc62de193b has different version in metadata: &#x27;21.2.4&#x27;</span><br>  Using cached pip-21.2.3-py3-none-any.whl (1.6 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/ca/bf/4133a0e05eac641ec270bbcef30512b5ad307d7838adb994acd652cc30e3/pip-21.2.3-py3-none-any.whl<span class="hljs-comment">#sha256=895df6014c2f02f9d278a8ad6e31cdfd312952b4a93c3068d0556964f4490057 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/ca/bf/4133a0e05eac641ec270bbcef30512b5ad307d7838adb994acd652cc30e3/pip-21.2.3-py3-none-any.whl#sha256=895df6014c2f02f9d278a8ad6e31cdfd312952b4a93c3068d0556964f4490057 has different version in metadata: &#x27;21.2.3&#x27;</span><br>  Using cached pip-21.2.3.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/e1/63/7c0e553ae0513ebf1858f08030158ff5998324013e0ba4c2e1c00b85df79/pip-21.2.3.tar.gz<span class="hljs-comment">#sha256=91e66f2a2702e7d2dcc092ed8c5ebe923e69b9997ea28ba25823943bcd3bf820 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/e1/63/7c0e553ae0513ebf1858f08030158ff5998324013e0ba4c2e1c00b85df79/pip-21.2.3.tar.gz#sha256=91e66f2a2702e7d2dcc092ed8c5ebe923e69b9997ea28ba25823943bcd3bf820 has different version in metadata: &#x27;21.2.3&#x27;</span><br>  Using cached pip-21.2.2-py3-none-any.whl (1.6 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/8a/d7/f505e91e2cdea53cfcf51f4ac478a8cd64fb0bc1042629cedde20d9a6a9b/pip-21.2.2-py3-none-any.whl<span class="hljs-comment">#sha256=b02a9d345f913e03fde2ed41896687cc1a2053c6adbe142ec03cff6b0827233d (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/8a/d7/f505e91e2cdea53cfcf51f4ac478a8cd64fb0bc1042629cedde20d9a6a9b/pip-21.2.2-py3-none-any.whl#sha256=b02a9d345f913e03fde2ed41896687cc1a2053c6adbe142ec03cff6b0827233d has different version in metadata: &#x27;21.2.2&#x27;</span><br>  Using cached pip-21.2.2.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/83/37/3f344e392de7792748ee32e05d7dd6f867eb2166c21c8711280fb30e2128/pip-21.2.2.tar.gz<span class="hljs-comment">#sha256=38e9250dfb0d7fa842492bede9259d4b3289a936ce454f7c58f059f28a94c01d (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/83/37/3f344e392de7792748ee32e05d7dd6f867eb2166c21c8711280fb30e2128/pip-21.2.2.tar.gz#sha256=38e9250dfb0d7fa842492bede9259d4b3289a936ce454f7c58f059f28a94c01d has different version in metadata: &#x27;21.2.2&#x27;</span><br>  Using cached pip-21.2.1-py3-none-any.whl (1.6 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/7c/02/9ab8b431aca1b46fcc1ac830a5870a28a12ba1abfa681904b1d2da876a86/pip-21.2.1-py3-none-any.whl<span class="hljs-comment">#sha256=da0ac9d9032d1d7bac69e9e301778f77b8b6626b85203f99edd2b545434d90a7 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/7c/02/9ab8b431aca1b46fcc1ac830a5870a28a12ba1abfa681904b1d2da876a86/pip-21.2.1-py3-none-any.whl#sha256=da0ac9d9032d1d7bac69e9e301778f77b8b6626b85203f99edd2b545434d90a7 has different version in metadata: &#x27;21.2.1&#x27;</span><br>  Using cached pip-21.2.1.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/f7/ce/e359cf283c0c0f2e0af7df8f16c8d79047aa1887a00a5b39b27d8afc49e2/pip-21.2.1.tar.gz<span class="hljs-comment">#sha256=303a82aaa24cdc01f7ebbd1afc7d1b871a4aa0a88bb5bedef1fa86a3ee44ca0a (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/f7/ce/e359cf283c0c0f2e0af7df8f16c8d79047aa1887a00a5b39b27d8afc49e2/pip-21.2.1.tar.gz#sha256=303a82aaa24cdc01f7ebbd1afc7d1b871a4aa0a88bb5bedef1fa86a3ee44ca0a has different version in metadata: &#x27;21.2.1&#x27;</span><br>  Using cached pip-21.1.3-py3-none-any.whl (1.5 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/47/ca/f0d790b6e18b3a6f3bd5e80c2ee4edbb5807286c21cdd0862ca933f751dd/pip-21.1.3-py3-none-any.whl<span class="hljs-comment">#sha256=78cb760711fedc073246543801c84dc5377affead832e103ad0211f99303a204 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/47/ca/f0d790b6e18b3a6f3bd5e80c2ee4edbb5807286c21cdd0862ca933f751dd/pip-21.1.3-py3-none-any.whl#sha256=78cb760711fedc073246543801c84dc5377affead832e103ad0211f99303a204 has different version in metadata: &#x27;21.1.3&#x27;</span><br>  Using cached pip-21.1.3.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/4d/0c/3b63fe024414a8a48661cf04f0993d4b2b8ef92daed45636474c018cd5b7/pip-21.1.3.tar.gz<span class="hljs-comment">#sha256=b5b1eb91b36894bd01b8e5a56a422c2f3838573da0b0a1c63a096bb454e3b23f (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/4d/0c/3b63fe024414a8a48661cf04f0993d4b2b8ef92daed45636474c018cd5b7/pip-21.1.3.tar.gz#sha256=b5b1eb91b36894bd01b8e5a56a422c2f3838573da0b0a1c63a096bb454e3b23f has different version in metadata: &#x27;21.1.3&#x27;</span><br>  Using cached pip-21.1.2-py3-none-any.whl (1.5 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/<span class="hljs-built_in">cd</span>/82/04e9aaf603fdbaecb4323b9e723f13c92c245f6ab2902195c53987848c78/pip-21.1.2-py3-none-any.whl<span class="hljs-comment">#sha256=f8ea1baa693b61c8ad1c1d8715e59ab2b93cd3c4769bacab84afcc4279e7a70e (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/cd/82/04e9aaf603fdbaecb4323b9e723f13c92c245f6ab2902195c53987848c78/pip-21.1.2-py3-none-any.whl#sha256=f8ea1baa693b61c8ad1c1d8715e59ab2b93cd3c4769bacab84afcc4279e7a70e has different version in metadata: &#x27;21.1.2&#x27;</span><br>  Using cached pip-21.1.2.tar.gz (1.6 MB)<br>  Installing build dependencies ... <span class="hljs-keyword">done</span><br>  Getting requirements to build wheel ... <span class="hljs-keyword">done</span><br>    Preparing wheel metadata ... <span class="hljs-keyword">done</span><br>WARNING: Discarding https://files.pythonhosted.org/packages/b1/44/6e26d5296b83c6aac166e48470d57a00d3ed1f642e89adc4a4e412a01643/pip-21.1.2.tar.gz<span class="hljs-comment">#sha256=eb5df6b9ab0af50fe1098a52fd439b04730b6e066887ff7497357b9ebd19f79b (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/b1/44/6e26d5296b83c6aac166e48470d57a00d3ed1f642e89adc4a4e412a01643/pip-21.1.2.tar.gz#sha256=eb5df6b9ab0af50fe1098a52fd439b04730b6e066887ff7497357b9ebd19f79b has different version in metadata: &#x27;21.1.2&#x27;</span><br>  Using cached pip-21.1.1-py3-none-any.whl (1.5 MB)<br>WARNING: Discarding https://files.pythonhosted.org/packages/<span class="hljs-built_in">cd</span>/6f/43037c7bcc8bd8ba7c9074256b1a11596daa15555808ec748048c1507f08/pip-21.1.1-py3-none-any.whl<span class="hljs-comment">#sha256=11d095ed5c15265fc5c15cc40a45188675c239fb0f9913b673a33e54ff7d45f0 (from https://pypi.org/simple/pip/) (requires-python:&gt;=3.6). Requested pip from https://files.pythonhosted.org/packages/cd/6f/43037c7bcc8bd8ba7c9074256b1a11596daa15555808ec748048c1507f08/pip-21.1.1-py3-none-any.whl#sha256=11d095ed5c15265fc5c15cc40a45188675c239fb0f9913b673a33e54ff7d45f0 has different version in metadata: &#x27;21.1.1&#x27;</span><br>  Using cached pip-21.1.1.tar.gz (1.6 MB)<br>^CERROR: Operation cancelled by user<br></code></pre></td></tr></table></figure><p>Install the latest pip via <a href="https://pip.pypa.io/en/stable/installation/#get-pip-py">https://pip.pypa.io/en/stable/installation/#get-pip-py</a>.<br>Using the following commands:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m ensurepip --upgrade<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Package downgrades</title>
    <link href="/2021/08/10/Package-downgrades/"/>
    <url>/2021/08/10/Package-downgrades/</url>
    
    <content type="html"><![CDATA[<h3 id="安装downgrade软件"><a href="#安装downgrade软件" class="headerlink" title="安装downgrade软件"></a>安装downgrade软件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -Syyu<br>sudo pacman -S downgrade<br></code></pre></td></tr></table></figure><h3 id="使用downgrade降级制定的包"><a href="#使用downgrade降级制定的包" class="headerlink" title="使用downgrade降级制定的包"></a>使用downgrade降级制定的包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo downgrade package<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>downgrade</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pacman log</title>
    <link href="/2021/08/10/Pacman-log/"/>
    <url>/2021/08/10/Pacman-log/</url>
    
    <content type="html"><![CDATA[<h3 id="查看pacman的更新记录"><a href="#查看pacman的更新记录" class="headerlink" title="查看pacman的更新记录"></a>查看pacman的更新记录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo vim /var/<span class="hljs-built_in">log</span>/pamcan.log<br></code></pre></td></tr></table></figure><h3 id="vim跳转到文件的结尾和开头"><a href="#vim跳转到文件的结尾和开头" class="headerlink" title="vim跳转到文件的结尾和开头"></a>vim跳转到文件的结尾和开头</h3><p>vim使用<code>$</code>跳转到文件的结尾，使用<code>1</code>跳转到文件的开头。</p>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>pacman</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux restore from timeshift backup</title>
    <link href="/2021/07/14/Archlinux-restore-from-timeshift-backup/"/>
    <url>/2021/07/14/Archlinux-restore-from-timeshift-backup/</url>
    
    <content type="html"><![CDATA[<h3 id="准备一个U盘"><a href="#准备一个U盘" class="headerlink" title="准备一个U盘"></a>准备一个U盘</h3><p>首先需要准备一个archlinux的启动U盘，然后在BIOS界面进入U盘的archlinux系统。</p><h3 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h3><p>使用以下命令挂载分区</p><ol><li>列出所有的分区</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsblk<br></code></pre></td></tr></table></figure><ol start="2"><li>挂载系统分区</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 挂载home, /， efi（根据之前安装的情况，挂载到/mnt/boot或者/mnt/boot/efi）</span><br>mount /dev/[partition_to_mount] /mnt<br><br><span class="hljs-comment"># example</span><br>mount /dev/nvmen0p3 /mnt<br>mount /dev/nvmenop4 /mnt/home<br>mount /dev/nvmen0p1 /mnt/boot/efi<br></code></pre></td></tr></table></figure><ol start="3"><li>进入挂载分区的根目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /mnt<br></code></pre></td></tr></table></figure><ol start="4"><li>挂载完整的文件系统</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount -t proc /mnt/proc<br>mount -t sysfs sys /mnt/sys<br>mount -o <span class="hljs-built_in">bind</span> /dev /mnt/dev<br>mount -o <span class="hljs-built_in">bind</span> /run /mnt/run<br>mount -t devpts pts /mnt/dev/pts/<br><br>cp /etc/resolv.conf /mnt/etc/resolv.conf<br></code></pre></td></tr></table></figure><ol start="5"><li>切换系统的根位置</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chroot /mnt<br></code></pre></td></tr></table></figure><blockquote><p>这里也可以使用<code>arch-chroot</code>，不过可能会报错。</p></blockquote><ol start="6"><li>使用timeshift进行恢复</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">timeshift --restore<br></code></pre></td></tr></table></figure><p>然后，跟着指引选择就可以了。如果问到需不需要重新安装bootloader，位置就选择你这个磁盘（我两个系统装在了两个盘里，没有试过不重新安装这个操作，并且我timeshift备份了/boot）。</p><ol start="7"><li><p>重启</p></li><li><p>进入不到引导界面</p><ul><li>重新执行步骤2</li><li>然后命令行里输入：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 请切修改你的efi分区</span><br>grub-install /dev/nvmenop1<br></code></pre></td></tr></table></figure><blockquote><p>如果这里报错<code>cannot find EFI dictionary</code>，应该是之前挂载efi分区的时候挂载错了。</p></blockquote></li></ul></li><li><p>重启，恢复成功</p></li></ol><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ol><li><a href="https://unix.stackexchange.com/questions/405472/cannot-find-efi-directory-issue-with-grub-install">https://unix.stackexchange.com/questions/405472/cannot-find-efi-directory-issue-with-grub-install</a></li><li><a href="https://forum.artixlinux.org/index.php/topic,103.0.html">https://forum.artixlinux.org/index.php/topic,103.0.html</a></li><li><a href="https://bbs.archlinux.org/viewtopic.php?id=256665">https://bbs.archlinux.org/viewtopic.php?id=256665</a></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>timeshift</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Archlinux shuts down slowly</title>
    <link href="/2021/07/04/Archlinux-shuts-down-slowly/"/>
    <url>/2021/07/04/Archlinux-shuts-down-slowly/</url>
    
    <content type="html"><![CDATA[<h3 id="archlinux关机缓慢"><a href="#archlinux关机缓慢" class="headerlink" title="archlinux关机缓慢"></a>archlinux关机缓慢</h3><p>Archlinux在关机的时候，经常会等很久，且屏幕上显示<code>A stop job is running for Session c1 of user **</code>，这是由于systemd无法终止某些服务的问题造成的。</p><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>编辑<code>/etc/systemd/system.conf</code>文件，将</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#DefaultTimeoutStopSec=90s</span><br></code></pre></td></tr></table></figure><p>改为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">DefaultTimeoutStopSec=10s<br></code></pre></td></tr></table></figure><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ol><li><a href="https://blog.fevenor.com/2016/04/15/archlinux-long-time-to-shutdown/">https://blog.fevenor.com/2016/04/15/archlinux-long-time-to-shutdown/</a></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>system</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Activate Windows 10</title>
    <link href="/2021/06/17/Activate-Windows-10/"/>
    <url>/2021/06/17/Activate-Windows-10/</url>
    
    <content type="html"><![CDATA[<h3 id="激活Windows10或者11"><a href="#激活Windows10或者11" class="headerlink" title="激活Windows10或者11"></a>激活Windows10或者11</h3><p>以管理员权限运行CMD，依次执行以下命令。</p><p>清除原先的密钥管理工具：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">slmgr /ckms<br></code></pre></td></tr></table></figure><p>使用密钥，这个密钥是Windows10 Pro的，需要别的版本可以自行替换：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX<br></code></pre></td></tr></table></figure><p>与KMS服务器保持连接，失效的话，可以自行搜索密钥服务管理器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">slmgr /skms kms.03k.org<br></code></pre></td></tr></table></figure><p>让Windows在线激活：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">slmgr /ato<br></code></pre></td></tr></table></figure><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ol><li><a href="https://www.youtube.com/watch?v=5loeDGnium8">https://www.youtube.com/watch?v=5loeDGnium8</a></li><li><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn502540(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn502540(v=ws.11)</a></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Windows10</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux and Windows grub</title>
    <link href="/2021/06/12/Linux-and-Windows-grub/"/>
    <url>/2021/06/12/Linux-and-Windows-grub/</url>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>更新linux引导中只有linux的引导，没有Windows的引导</p><h3 id="下载os-prober"><a href="#下载os-prober" class="headerlink" title="下载os-prober"></a>下载os-prober</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo pacman -S os-prober<br></code></pre></td></tr></table></figure><p>使用grub-mkconfig的时候，os-prober可以自动识别Windows分区，并加到启动项里。如果不挂载Windows的efi分区，运行grub-mkconfig，将导致Windows的entry消失。</p><h3 id="生成新的引导文件"><a href="#生成新的引导文件" class="headerlink" title="生成新的引导文件"></a>生成新的引导文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>grub</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dell inspiration7590 Microphone</title>
    <link href="/2021/06/08/Dell-inspiration7590-Microphone/"/>
    <url>/2021/06/08/Dell-inspiration7590-Microphone/</url>
    
    <content type="html"><![CDATA[<h3 id="麦克风没有出现在系统的设置里"><a href="#麦克风没有出现在系统的设置里" class="headerlink" title="麦克风没有出现在系统的设置里"></a>麦克风没有出现在系统的设置里</h3><p>使用下面的命令获得麦克风的card and device number</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ arecord -l<br><br>**** List of CAPTURE Hardware Devices ****<br>card 0: sofhdadsp [sof-hda-dsp], device 0: HDA Analog (*) []<br>  Subdevices: 1/1<br>  Subdevice <span class="hljs-comment">#0: subdevice #0</span><br></code></pre></td></tr></table></figure><p>用上面获得的数值，得到<code>hw:CARD,DEVICE</code><br>然后，编辑<code>/etc/pulse/default.pa</code>，插入<code>load-module</code>加载声卡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">load-module module-alsa-source device=hw:0,0<br><span class="hljs-comment"># the line above should be somewhere before the line below</span><br>.ifexists module-udev-detect.so<br></code></pre></td></tr></table></figure><p>最后，重启pulseaudiio应用新设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ pulseaudio -k ; pulseaudio -D<br></code></pre></td></tr></table></figure><h3 id="查看声卡驱动"><a href="#查看声卡驱动" class="headerlink" title="查看声卡驱动"></a>查看声卡驱动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ lspci -v<br><br>00:1f.3 Multimedia audio controller: Intel Corporation Cannon Lake PCH cAVS (rev 10)<br>        DeviceName: Onboard - Sound<br>        Subsystem: Dell Device 0922<br>        Flags: bus master, fast devsel, latency 32, IRQ 174, IOMMU group 15<br>        Memory at ed418000 (64-bit, non-prefetchable) [size=16K]<br>        Memory at ed100000 (64-bit, non-prefetchable) [size=1M]<br>        Capabilities: &lt;access denied&gt;<br>        Kernel driver <span class="hljs-keyword">in</span> use: sof-audio-pci-intel-cnl<br>        Kernel modules: snd_hda_intel, snd_soc_skl, snd_sof_pci_intel_cnl<br></code></pre></td></tr></table></figure><p>如果使用中的驱动是snd_hda_intel，编辑<code>/etc/modprobe.d/dsp-fix.conf</code>或者<code>/etc/modprobe.d/audio-fix.conf</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cat dsp-fix.conf      <br><span class="hljs-comment"># options snd-intel-dspcfg dsp_driver=1</span><br></code></pre></td></tr></table></figure><p>将这一行注释掉，然后使用<code>pacman</code>安装<code>sof-firmware</code>和<code>alsa-ucm-conf</code>固件，就会启用sof-hda-dsp driver。之后可以在系统设置中看见麦克风。</p><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ol><li><a href="https://wiki.archlinux.org/title/PulseAudio/Troubleshooting#Microphone_not_detected_by_PulseAudio">https://wiki.archlinux.org/title/PulseAudio/Troubleshooting#Microphone_not_detected_by_PulseAudio</a></li><li><a href="https://wiki.archlinux.org/title/Dell_Inspiron_15_(7590)#Use_the_new_sof-hda-dsp_driver">https://wiki.archlinux.org/title/Dell_Inspiron_15_(7590)#Use_the_new_sof-hda-dsp_driver</a></li><li><a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#ALSA_firmware">https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#ALSA_firmware</a></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
