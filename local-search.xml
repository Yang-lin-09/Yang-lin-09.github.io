<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Dell inspiration7590 Microphone</title>
    <link href="/2021/06/08/Dell-inspiration7590-Microphone/"/>
    <url>/2021/06/08/Dell-inspiration7590-Microphone/</url>
    
    <content type="html"><![CDATA[<h3 id="麦克风没有出现在系统的设置里"><a href="#麦克风没有出现在系统的设置里" class="headerlink" title="麦克风没有出现在系统的设置里"></a>麦克风没有出现在系统的设置里</h3><p>使用下面的命令获得麦克风的card and device number</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ arecord -l<br><br>**** List of CAPTURE Hardware Devices ****<br>card 0: sofhdadsp [sof-hda-dsp], device 0: HDA Analog (*) []<br>  Subdevices: 1/1<br>  Subdevice <span class="hljs-comment">#0: subdevice #0</span><br></code></pre></td></tr></table></figure><p>用上面获得的数值，得到<code>hw:CARD,DEVICE</code><br>然后，编辑<code>/etc/pulse/default.pa</code>，插入<code>load-module</code>加载声卡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">load-module module-alsa-source device=hw:0,0<br><span class="hljs-comment"># the line above should be somewhere before the line below</span><br>.ifexists module-udev-detect.so<br></code></pre></td></tr></table></figure><p>最后，重启pulseaudiio应用新设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ pulseaudio -k ; pulseaudio -D<br></code></pre></td></tr></table></figure><h3 id="查看声卡驱动"><a href="#查看声卡驱动" class="headerlink" title="查看声卡驱动"></a>查看声卡驱动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ lspci -v<br><br>00:1f.3 Multimedia audio controller: Intel Corporation Cannon Lake PCH cAVS (rev 10)<br>        DeviceName: Onboard - Sound<br>        Subsystem: Dell Device 0922<br>        Flags: bus master, fast devsel, latency 32, IRQ 174, IOMMU group 15<br>        Memory at ed418000 (64-bit, non-prefetchable) [size=16K]<br>        Memory at ed100000 (64-bit, non-prefetchable) [size=1M]<br>        Capabilities: &lt;access denied&gt;<br>        Kernel driver <span class="hljs-keyword">in</span> use: sof-audio-pci-intel-cnl<br>        Kernel modules: snd_hda_intel, snd_soc_skl, snd_sof_pci_intel_cnl<br></code></pre></td></tr></table></figure><p>如果使用中的驱动是snd_hda_intel，编辑<code>/etc/modprobe.d/dsp-fix.conf</code>或者<code>/etc/modprobe.d/audio-fix.conf</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cat dsp-fix.conf      <br><span class="hljs-comment"># options snd-intel-dspcfg dsp_driver=1</span><br></code></pre></td></tr></table></figure><p>将这一行注释掉，然后使用<code>pacman</code>安装<code>sof-firmware</code>和<code>alsa-ucm-conf</code>固件，就会启用sof-hda-dsp driver。之后可以在系统设置中看见麦克风。</p><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ol><li><a href="https://wiki.archlinux.org/title/PulseAudio/Troubleshooting#Microphone_not_detected_by_PulseAudio">https://wiki.archlinux.org/title/PulseAudio/Troubleshooting#Microphone_not_detected_by_PulseAudio</a></li><li><a href="https://wiki.archlinux.org/title/Dell_Inspiron_15_(7590)#Use_the_new_sof-hda-dsp_driver">https://wiki.archlinux.org/title/Dell_Inspiron_15_(7590)#Use_the_new_sof-hda-dsp_driver</a></li><li><a href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#ALSA_firmware">https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#ALSA_firmware</a></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>Microphone</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
